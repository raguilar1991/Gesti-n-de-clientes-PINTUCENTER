<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de usuario - PINTUCENTER</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/registrar.css') }}">
</head>

<body>
    <div class="login-wrapper"> <!-- Contenedor principal -->
        <div class="login-container"><!-- Contenedor del formulario de registro -->
            <!--logo primero-->
            <img src="{{ url_for('static', filename='img/PINTUCENTER500500.png') }}" alt="PINTUCENTER500" class="logo">
            <h2 class="form-titulo">Registro de Usuario</h2> <!-- T칤tulo del formulario -->
            <form method="POST" action="{{ url_for('registrar') }}"> <!-- Formulario que env칤a datos a la ruta 'registrar_usuario' -->
                <div class="input-group">
                    <label for="usuario"><span class="icon">游녻</span>Usuario:</label>
                    <input type="text" id="usuario" name="usuario" required>
                </div>
                <div class="input-group">
                    <label for="contrasena"><span class="icon">游</span>Contrase침a:</label>
                    <input type="password" id="contrasena" name="contrasena" required>
                </div>
                <div class="input-group">
                    <label for="confirmpass"><span class="icon">游</span>Confirmar Contrase침a:</label>
                    <input type="password" id="confirmpass" name="confirmpass" required>
                </div>
                <button type="submit">游닇 Registrar</button>
            </form>
            <!--MENSAJES FLASH -->
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                <div class="error">{{ messages[0] }}</div> <!-- Mostrar el primer mensaje flash -->
                {% endif %}
            {% endwith %}
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function () {/*esperar a que el DOM se cargue completamente */ 
        const pass = document.getElementById('contrasena'); /*seleccionar el campo de contrase침a y lo guarda en el pass */
        const confirm = document.getElementById('confirmpass'); /*seleccionar el campo de confirmaci칩n de contrase침a */
        const button = document.querySelector('button[type="submit"]'); /*seleccionar el bot칩n de env칤o del formulario */
        /*- Se usar치 para activar o desactivar el bot칩n seg칰n si las contrase침as coinciden. */
        
        const warning = document.createElement('div'); /*crear un nuevo elemento div para mostrar advertencias, se mostrara el mensaje del error */
        warning.className = 'password-warning'; /*asignar la clase 'error' al div para aplicar estilos */
        warning.style.marginTop = '10px'; /*agregar un margen superior de 10 p칤xeles al div  para que no ese pegado*/
        warning.style.color = 'red'; /*establecer el color del texto en rojo */
        warning.textContent = 'Las contrase침as no coinciden'; /*establecer el texto que se mostrar치 en el div */
        warning.style.display = 'none'; /*inicialmente ocultar el div o el mensaje solo se muestra si las contrase침as no coinciden*/
        
        confirm.parentNode.appendChild(warning); /*agregar el div de advertencia justo despu칠s del campo de confirmaci칩n de contrase침a en el formulario */
        
        function validar() {/*define funci칩n para validar si las contrase침as coinciden */
            if (pass.value !== confirm.value) { /*comparar los valores de los campos de contrase침a y confirmaci칩n */
                warning.style.display = 'block'; /*si no coinciden, mostrar el mensaje de advertencia en rojo */
                button.disabled = true; /*desactivar el bot칩n de env칤o del formulario hasta que las contrase침a coincidan */
                button.style.backgroundColor = '#ccc'; /*cambiar el color de fondo del bot칩n a gris para indicar que est치 desactivado */
            } else { /*si las contrase침as coinciden */
                warning.style.display = 'none'; /*ocultar el mensaje de advertencia */
                button.disabled = false; /*activar el bot칩n de env칤o del formulario */
                button.style.backgroundColor = '#007bff'; /*restaurar el color de fondo original del bot칩n (azul) para indicar que est치 activo */
            }
        }

        pass.addEventListener('input', validar); /*agregar un evento de escucha al campo de contrase침a que llama a la funci칩n validar cada vez que el usuario escribe algo */
        confirm.addEventListener('input', validar); /*agregar un evento de escucha al campo de confirmaci칩n de contrase침a que llama a la funci칩n validar cada vez que el usuario escribe algo */
    });
    </script>
</body>
</html>